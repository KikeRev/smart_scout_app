{% extends "base.html" %}
{% load static %}
{% block extra_head %}
  <script src="{% static 'chats/chat.js' %}" defer></script>
{% endblock %}

{% block content %}
<div id="chat-container"
     data-stream-url="{% url 'chats:chat_stream' %}"
     data-api-url="{% url 'chats:chat_api' %}"
     data-session-id="{{ session.id }}">
  <h2 class="title">{{ session.title|default:"Nuevo informe" }}</h2>

  <div id="messages">
    {% for m in messages %}
      {% include "chats/_message.html" with m=m %}
    {% endfor %}
  </div>

  <form id="chat-form" class="chat-form">
    <textarea name="message" placeholder="Escribe tu preguntaâ€¦" required></textarea>
    <button type="submit" class="btn btn-primary">Enviar</button>
  </form>
</div>
{% endblock %}
